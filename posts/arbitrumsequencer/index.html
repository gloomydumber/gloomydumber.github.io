<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light dark">
  
  
    
  
  <meta name="description" content="My blog site.">

  <title>Arbitrum Sequencer Feed Validation with WebAssembly</title>
  <link rel="icon" type="image/png" sizes="32x32" href="https://gloomydumber.github.io/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://gloomydumber.github.io/img/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://gloomydumber.github.io/img/apple-touch-icon.png">
  
  <style>

  /* light mode colors */
  body {
    --primary-color: #5871a2;
    --primary-pale-color: #5871a233;
    --primary-decoration-color: #5871a210;
    --bg-color: #ffffff;
    --text-color: #2f3030;
    --text-pale-color: #767676;
    --text-decoration-color: #a9a9a9;
    --highlight-mark-color: #5f75b020;

    --callout-note-color: #5871a2;
    --callout-tip-color: #268556;
    --callout-important-color: #885fc9;
    --callout-warning-color: #ab6632;
    --callout-caution-color: #c64e4e;
  }

  /* dark mode colors */
  body.dark {
    --primary-color: #6f8fd1;
    --primary-pale-color: #6f8fd166;
    --primary-decoration-color: #6f8fd112;
    --bg-color: #1c1c1c;
    --text-color: #c1c1c1;
    --text-pale-color: #848484;
    --text-decoration-color: #5f5f5f;
    --highlight-mark-color: #8296cb3b;

    --callout-note-color: #6f8fd1;
    --callout-tip-color: #47976f;
    --callout-important-color: #9776cd;
    --callout-warning-color: #ad7a52;
    --callout-caution-color: #d06161;
  }

  /* typography */
  body {
    --main-font: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
    --code-font: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
    --homepage-max-width: 768px;
    --main-max-width: 768px;
    --avatar-size: 60px;
    --font-size: 16px;
    --line-height: 1.75;
    --img-border-radius: 0px;
    --detail-border-radius: 0px;
    --dark-mode-img-brightness: 0.75;
    --dark-mode-chart-brightness: 0.75;
    --inline-code-border-radius: 2px;
    --inline-code-bg-color: var(--primary-decoration-color);
    --block-code-border-radius: 0px;
    --block-code-border-color: var(--primary-color);
    --detail-border-color: var(--primary-color);
  }

</style>

  <link rel="stylesheet" href="https://gloomydumber.github.io/main.css">
  

<link id="hl" rel="stylesheet" type="text/css" href="/hl-light.css" />



  
</head>

<body class="post">
  
  <script>
    const theme = sessionStorage.getItem('theme');
    const match = window.matchMedia("(prefers-color-scheme: dark)").matches
    if ((theme && theme == 'dark') || (!theme && match)) {
      document.body.classList.add('dark');
      const hl = document.querySelector('link#hl');
      if (hl) hl.href = 'https://gloomydumber.github.io/hl-dark.css';
    }
  </script>
  
  
<div id="wrapper">
  <div id="blank"></div>
  <aside>
    
    
    <nav>
      <ul>
        
        <li>
          <a class="h2" href="#arbitrum-sequencer-feed-validation">Arbitrum Sequencer Feed Validation</a>
          
        </li>
        
        <li>
          <a class="h2" href="#wasm-compile">WASM Compile</a>
          
        </li>
        
      </ul>
    </nav>
    
    
    <button id="back-to-top" aria-label="back to top">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-up"><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></svg>

    </button>
    
  </aside>
  <main>
    
<header>
  <nav>
    <a id="back-link" href="https:&#x2F;&#x2F;gloomydumber.github.io&#x2F;posts">← Back</a>
  </nav>
</header>


    <div>
      
      
      
      
      <div id="copy-cfg" style="display: none;" data-copy-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
" data-check-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
"></div>
      
      <article class="prose">
        <h1>Arbitrum Sequencer Feed Validation with WebAssembly</h1>
        <div id="post-info">
          <div id="date">
            <span id="publish">Oct 15, 2024</span>
            </div>

          
        </div>

        
        

        

        <p>Sequence란 L2에서 처리 될 트랜잭션의 순서를 정렬하는 과정 또는 그러한 작업 그 자체를 뜻한다. L2 블록체인이 동작하는 데 있어서 일련의 트랜잭션의 순서를 조작하거나, 특정 트랜잭션을 악의적으로 생략하여 Front / Back Running, Sandwich Attack과 같은 MEV 공격이 일어날 수 있는 중요한 과정 중 하나이다. 이러한 Sequence 동작을 수행하는 주체를 Sequencer라 하는데, L2 중에서도 <strong>Arbitrum</strong>의 Sequencer는 자신이 수행하는 Sequence 결과를 두 가지 방법으로 공표(publish)한다.</p>
<p>첫 번째 방법으로는, 롤업의 과정 중의 하나이자 Sequence의 결과를 공표하는 일반적인 방법으로, Sequence 처리 된 트랜잭션의 순서를 포함한 정보를 일련의 데이터 압축 과정을 거쳐 Ethereum calldata 및 blob의 형태로 구성된 트랜잭션을 L1인 Ethereum에 제출하는 Batch Posting의 형태로 공표(publish)하는 방법이 있다. 만일 그렇게 제출된 트랜잭션에 잘못된 정보가 존재한다면, Fraud Proof라고 불리는 과정을 거치게 된다. Fraud Proof 과정에서는 잘못된 정보를 발견하여 제출하는 생태계 참여자에게 경제적 보상을 제공하는데, 이러한 경제적 유인을 통해 악의적 행동이나 예기치 못한 동작이 일어나지 않도록 항상 감시하게 한다.</p>
<p>두 번째 방법은 첫 번째 방법을 보조하는 개념이다. 실시간 피드를 발행하는 (publishing real-time feed) 방법인데, 실시간 피드는 누구나 구독하여 WebSocket 혹은 HTTP 스트림을 통해 메세지의 형태로 받아 볼 수 있다. 피드는 그 자체로서 Sequencer가 해당 트랜잭션을 특정한 순서로 처리할 것임을 공표하는 일종의 약속이라고 할 수 있고, 피드를 통해 트랜잭션 순서의 조작과 같은 중앙화 된 Sequencer의 악의적 행동이나 예기치 못한 동작 등, 피드의 내용과 실제 L2 네트워크에서 처리 된 트랜잭션이 정상적으로 서로 일치하는지 여부를 생태계 참여자 모두가 감시할 수 있다.</p>
<p>L2에서 말하는 Rollup의 핵심적인 처리는 전통적으로 첫 번째 방법으로 이루어지는 것이고, Arbitrum은 트랜잭션이 온체인에서 처리되기 직전에 Sequnecer Feed를 제공하는 두 번째 방법으로 이용자들에게 좀 더 투명성을 제공해주고자 한다. 첫 번째 방법이 필수적이고 이 방법을 통해서야 확실이 트랜잭션이 L1에 제출되었다는 <strong>Hard Confirmation</strong>을 얻을 수 있다. 두 번째 방법을 통해서는 아직 L1에서 확실한 보증이 이루어지진 못했지만 유저에게 좀 더 빨리 알려주는 식으로 <strong>Soft Confirmation</strong>이라는 개념으로 보증하는 것이다. Hard Confirmation이 이루어지는 기준으로 유저에게 온체인 정보와 UX를 제공하면 L1의 속도와 별다를바 없기 때문에, L2의 Soft Confirmation이라는 과정을 통해 약간의 보안성과 완결성을 포기하고 빠른 속도의 UX를 얻는 것이다.</p>
<p>이 글에서는 우선 Arbitrum Sequencer Feed가 실제 온체인의 데이터와 일치하는지 검증하는 과정에 대해 알아보고, 그 검증 과정을 Go 언어를 웹 어셈블리로 컴파일하여 웹 환경에서도 검증해 볼 수 있도록 하는 것에 대해 다룬다.</p>
<h2 id="arbitrum-sequencer-feed-validation">Arbitrum Sequencer Feed Validation<a class="zola-anchor" href="#arbitrum-sequencer-feed-validation" aria-label="Anchor link for: arbitrum-sequencer-feed-validation" style="visibility: hidden;"></a>
</h2>
<p>공식 문서 <a rel="noopener nofollow noreferrer" target="_blank" href="https://docs.arbitrum.io/run-arbitrum-node/sequencer/read-sequencer-feed">Arbitrum Docs | How to read the Sequencer Feed</a> 에서, Sequencer Feed를 읽는 방법을 잘 설명하고 있으므로 해당 내용에 기초하여 Sequencer Feed를 WebAssembly를 통해 웹 환경에서 검증하는 방법에 대해 알아보겠다.</p>
<p>Arbitrum Sequencer Feed는 WebSocket 메시지의 형태로 수신할 수 있으며, 수신되는 단위 메시지의 형태는 아래 예제의 JSON Format과 같다. 각 단위 메시지는, L2에서 처리된 하나의 블록에 대한 정보를 담고 있고, 특히 <code>l2Msg</code> 필드는 해당 블록에 포함된 트랜잭션들의 정보를 담고있다.</p>
<p>이러한 메시지 구조를 코드 레벨로 살펴보기 위해, 메시지가 어떻게 구성되어있는지 차근차근하게 살펴보겠다. 메시지 파싱을 위해 메시지 구성을 알아보는 것이지, 메시지 자체에 대해서 깊이있게 알 필요는 없으니, 구체적인 메시지 구성을 기억하기보다는 가볍게 살펴보며 과정을 따라가자. 이 예제 JSON 응답은 아래에서 계속 이루어질 파싱 과정에서 계속 활용될 예정이다.</p>
<pre data-lang="json" class="language-json z-code"><code class="language-json" data-lang="json"><span class="z-source z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-json">  </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>version<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">1</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json">  </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>messages<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">    <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>sequenceNumber<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">25757171</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>message<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">        </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>message<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>header<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">            </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>kind<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">3</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">            </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>sender<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>0xa4b000000000000000000073657175656e636572<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">            </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>blockNumber<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">16238523</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">            </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>timestamp<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">1671691403</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">            </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>requestId<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-language z-json">null</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">            </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>baseFeeL1<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-language z-json">null</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">          <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>l2Msg<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>BAL40oKksUiElQL5AISg7rsAgxb6o5SZbYNoIF2DTixsqDpD2xII9GJLG4C4ZAhh6N0AAAAAAAAAAAAAAAC7EQiq1R1VYgL3/oXgvD921hYRyAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArAAaAkebuEnSAUvrWVBGTxA7W+ZMNn5uyLlbOH7Nrs0bYOv6AOxQPqAo2UB0Z7vqlugjn+BUl0drDcWejBfDiPEC6jQA==<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">        <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">        </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>delayedMessagesRead<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">354560</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">      <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>signature<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-language z-json">null</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">    <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">  <span class="z-punctuation z-section z-sequence z-end z-json">]</span></span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></code></pre>
<p>위와 같은 JSON Format의 메시지 형태는 <a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/OffchainLabs/nitro">Arbitrum Nitro 엔진</a>의 Go 언어 구현체에서 marshalling 된 것으로 <code>BroadcastMessage</code> 및 <code>BroadCastFeedMessage</code> 라는 <code>struct</code> 타입으로 구현되어있는데, 아래와 같은 <a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/OffchainLabs/nitro/blob/4941f52a1eab6002feff07146f0937dfd4ce53d6/broadcaster/message/message.go#L29">코드</a>로 확인해 볼 수 있다. Nitro는 Geth를 기초로하여 만든 Arbitrum의 L2 구현용 엔진이다.</p>
<pre data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><span class="z-source z-go"><span class="z-storage z-type z-keyword z-type z-go">type</span> <span class="z-entity z-name z-type z-go">BroadcastMessage</span> <span class="z-storage z-type z-keyword z-struct z-go">struct</span> <span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">Version</span> <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">int</span></span> <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;version&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> TODO better name than messages since there are different types of messages
</span></span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">Messages</span>                       <span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-keyword z-operator z-go">*</span><span class="z-storage z-type z-go">BroadcastFeedMessage</span>         <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;messages,omitempty&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">ConfirmedSequenceNumberMessage</span> <span class="z-keyword z-operator z-go">*</span><span class="z-storage z-type z-go">ConfirmedSequenceNumberMessage</span> <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;confirmedSequenceNumberMessage,omitempty&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span><span class="z-source z-go">
</span><span class="z-source z-go"><span class="z-storage z-type z-keyword z-type z-go">type</span> <span class="z-entity z-name z-type z-go">BroadcastFeedMessage</span> <span class="z-storage z-type z-keyword z-struct z-go">struct</span> <span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">SequenceNumber</span> <span class="z-variable z-other z-go">arbutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">MessageIndex</span>           <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;sequenceNumber&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">Message</span>        <span class="z-variable z-other z-go">arbostypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">MessageWithMetadata</span> <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;message&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">BlockHash</span>      <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Hash</span>                   <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;blockHash,omitempty&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">Signature</span>      <span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">byte</span></span>                         <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;signature&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">CumulativeSumMsgSize</span> <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">uint64</span></span> <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;-&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span><span class="z-source z-go">
</span><span class="z-source z-go"><span class="z-storage z-type z-keyword z-type z-go">type</span> <span class="z-entity z-name z-type z-go">ConfirmedSequenceNumberMessage</span> <span class="z-storage z-type z-keyword z-struct z-go">struct</span> <span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">SequenceNumber</span> <span class="z-variable z-other z-go">arbutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">MessageIndex</span> <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;sequenceNumber&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></code></pre>
<p>또, <code>BroadcastFeedMessage</code> 구조체에 하위에 정의된 <code>Message</code> 는 <code>arbostypes.MessageWithMetadata</code> 타입으로 지정되어 있는데, 해당 타입은 Nitro의 <code>arbos</code> 패키지 하위에 아래와 같은 <a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/OffchainLabs/nitro/blob/4941f52a1eab6002feff07146f0937dfd4ce53d6/arbos/arbostypes/messagewithmeta.go#L17">코드</a>로 구현되어 있다.</p>
<pre data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><span class="z-source z-go"><span class="z-storage z-type z-keyword z-type z-go">type</span> <span class="z-entity z-name z-type z-go">MessageWithMetadata</span> <span class="z-storage z-type z-keyword z-struct z-go">struct</span> <span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">Message</span>             <span class="z-keyword z-operator z-go">*</span><span class="z-storage z-type z-go">L1IncomingMessage</span> <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;message&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">DelayedMessagesRead</span> <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">uint64</span></span>             <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;delayedMessagesRead&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span><span class="z-source z-go">
</span><span class="z-source z-go"><span class="z-storage z-type z-keyword z-type z-go">type</span> <span class="z-entity z-name z-type z-go">MessageWithMetadataAndBlockHash</span> <span class="z-storage z-type z-keyword z-struct z-go">struct</span> <span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">MessageWithMeta</span> <span class="z-storage z-type z-go">MessageWithMetadata</span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">BlockHash</span>       <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Hash</span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></code></pre>
<p>이와 별개로, <code>MessageWithMetadata</code> 구조체 하위에 정의된 <code>Message</code> 는 <code>*L1IncomingMessage</code> 타입으로 지정되어있고, 해당 구현체는 아래의 <a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/OffchainLabs/nitro/blob/4941f52a1eab6002feff07146f0937dfd4ce53d6/arbos/arbostypes/incomingmessage.go#L63">코드</a>와 같이 구현되어 있다.</p>
<pre data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><span class="z-source z-go"><span class="z-storage z-type z-keyword z-type z-go">type</span> <span class="z-entity z-name z-type z-go">L1IncomingMessage</span> <span class="z-storage z-type z-keyword z-struct z-go">struct</span> <span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">Header</span> <span class="z-keyword z-operator z-go">*</span><span class="z-storage z-type z-go">L1IncomingMessageHeader</span> <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;header&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">L2msg</span>  <span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">byte</span></span>                   <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;l2Msg&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> Only used for `L1MessageType_BatchPostingReport`
</span></span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">BatchGasCost</span> <span class="z-keyword z-operator z-go">*</span><span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">uint64</span></span> <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;batchGasCost,omitempty&quot; rlp:&quot;optional&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span><span class="z-source z-go">
</span><span class="z-source z-go"><span class="z-storage z-type z-keyword z-type z-go">type</span> <span class="z-entity z-name z-type z-go">L1IncomingMessageHeader</span> <span class="z-storage z-type z-keyword z-struct z-go">struct</span> <span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">Kind</span>        <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">uint8</span></span>          <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;kind&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">Poster</span>      <span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Address</span> <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;sender&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">BlockNumber</span> <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">uint64</span></span>         <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;blockNumber&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">Timestamp</span>   <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">uint64</span></span>         <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;timestamp&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">RequestId</span>   <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Hash</span>   <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;requestId&quot; rlp:&quot;nilList&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">L1BaseFee</span>   <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">big</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Int</span>       <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;baseFeeL1&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></code></pre>
<p>위 코드에서 <code>L2msg</code> 필드가 <code>[]byte</code> 타입으로 정의되어 있는 것을 알 수 있고, 앞선 JSON WebSocket Response의 에제에서는 <code>BAL40oKksUiElQL5AISg7rsAgxb6o5SZbYNoIF2DT...(중략)...ejBfDiPEC6jQA==</code> 값이었다.</p>
<p>해당 값은 base64 인코딩된 형태인데, 해당 <code>L2msg</code> 필드를 base64 디코딩하고 적절한 파싱 과정을 거치면 우리가 원하는 트랜잭션들의 정보를 얻을 수 있음을 추측할 수 있다. 이러한 메시지를 트랜잭션으로 디코딩 및 파싱하는 일련의 과정은 Nitro의 <code>arbos</code> 패키지 내에서 <code>ParseL2Transactions()</code> 라는 함수를 통해 이루어지게되고, 해당 <a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/OffchainLabs/nitro/blob/4941f52a1eab6002feff07146f0937dfd4ce53d6/arbos/parse_l2.go#L23">코드</a>는 아래와 같다.</p>
<pre data-linenos data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><table><tbody><tr><td>1</td><td><span class="z-source z-go"><span class="z-storage z-type z-keyword z-function z-go">func</span> <span class="z-entity z-name z-function z-go">ParseL2Transactions</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-parameter z-go">msg</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">arbostypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">L1IncomingMessage</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-parameter z-go">chainId</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">big</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Int</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">types</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Transactions</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">error</span></span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></td></tr><tr><td>2</td><td><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">if</span> <span class="z-variable z-function z-go"><span class="z-support z-function z-builtin z-go">len</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L2msg</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-keyword z-operator z-go">&gt;</span> <span class="z-variable z-other z-go">arbostypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">MaxL2MessageSize</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span></td></tr><tr><td>3</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> ignore the message if l2msg is too large
</span></span></span></span></td></tr><tr><td>4</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">return</span> <span class="z-constant z-language z-go">nil</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">errors</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">New</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>message too large<span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></td></tr><tr><td>5</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span></td></tr><tr><td>6</td><td><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">switch</span> <span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Kind</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span></td></tr><tr><td>7</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-variable z-other z-go">arbostypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L1MessageType_L2Message</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span></td></tr><tr><td><mark>8</mark></td><td><mark><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">return</span> <span class="z-variable z-function z-go">parseL2Message</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">bytes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">NewReader</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L2msg</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Poster</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Timestamp</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RequestId</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">chainId</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-constant z-numeric z-integer z-decimal z-go">0</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></mark></td></tr><tr><td>9</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-variable z-other z-go">arbostypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L1MessageType_Initialize</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span></td></tr><tr><td>10</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">return</span> <span class="z-constant z-language z-go">nil</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">errors</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">New</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>ParseL2Transactions encounted initialize message (should&#39;ve been handled explicitly at genesis)<span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></td></tr><tr><td>11</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-variable z-other z-go">arbostypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L1MessageType_EndOfBlock</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span></td></tr><tr><td>12</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">return</span> <span class="z-constant z-language z-go">nil</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-constant z-language z-go">nil</span>
</span></span></span></td></tr><tr><td>13</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-variable z-other z-go">arbostypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L1MessageType_L2FundedByL1</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span></td></tr><tr><td>14</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">if</span> <span class="z-variable z-function z-go"><span class="z-support z-function z-builtin z-go">len</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L2msg</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-keyword z-operator z-go">&lt;</span> <span class="z-constant z-numeric z-integer z-decimal z-go">1</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span></span></td></tr><tr><td>15</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-keyword z-control z-go">return</span> <span class="z-constant z-language z-go">nil</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">errors</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">New</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>L2FundedByL1 message has no data<span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></span></td></tr><tr><td>16</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span></span></td></tr><tr><td>17</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">if</span> <span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RequestId</span> <span class="z-keyword z-operator z-go">==</span> <span class="z-constant z-language z-go">nil</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span></span></td></tr><tr><td>18</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-keyword z-control z-go">return</span> <span class="z-constant z-language z-go">nil</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">errors</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">New</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>cannot issue L2 funded by L1 tx without L1 request id<span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></span></td></tr><tr><td>19</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span></span></td></tr><tr><td>20</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-declaration z-go">kind</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L2msg</span><span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-constant z-numeric z-integer z-decimal z-go">0</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span>
</span></span></span></td></tr><tr><td>21</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-declaration z-go">depositRequestId</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">crypto</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Keccak256Hash</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RequestId</span><span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-punctuation z-separator z-go">:</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">arbmath</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">U256Bytes</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Big0</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></td></tr><tr><td>22</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-declaration z-go">unsignedRequestId</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">crypto</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Keccak256Hash</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RequestId</span><span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-punctuation z-separator z-go">:</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">arbmath</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">U256Bytes</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Big1</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></td></tr><tr><td>23</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-declaration z-go">tx</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-declaration z-go">err</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-function z-go">parseUnsignedTx</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">bytes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">NewReader</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L2msg</span><span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-constant z-numeric z-integer z-decimal z-go">1</span><span class="z-punctuation z-separator z-go">:</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Poster</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">unsignedRequestId</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">chainId</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">kind</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></td></tr><tr><td>24</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">if</span> <span class="z-variable z-other z-go">err</span> <span class="z-keyword z-operator z-go">!=</span> <span class="z-constant z-language z-go">nil</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span></span></td></tr><tr><td>25</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-keyword z-control z-go">return</span> <span class="z-constant z-language z-go">nil</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">err</span>
</span></span></span></span></td></tr><tr><td>26</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span></span></td></tr><tr><td>27</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-declaration z-go">deposit</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">types</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">NewTx</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">types</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ArbitrumDepositTx</span><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span></span></td></tr><tr><td>28</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-variable z-other z-go">ChainId</span><span class="z-punctuation z-separator z-go">:</span>     <span class="z-variable z-other z-go">chainId</span><span class="z-punctuation z-separator z-go">,</span>
</span></span></span></span></td></tr><tr><td>29</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-variable z-other z-go">L1RequestId</span><span class="z-punctuation z-separator z-go">:</span> <span class="z-variable z-other z-go">depositRequestId</span><span class="z-punctuation z-separator z-go">,</span>
</span></span></span></span></td></tr><tr><td>30</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> Matches the From of parseUnsignedTx
</span></span></span></span></span></td></tr><tr><td>31</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-variable z-other z-go">To</span><span class="z-punctuation z-separator z-go">:</span>    <span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Poster</span><span class="z-punctuation z-separator z-go">,</span>
</span></span></span></span></td></tr><tr><td>32</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-variable z-other z-go">Value</span><span class="z-punctuation z-separator z-go">:</span> <span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Value</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-separator z-go">,</span>
</span></span></span></span></td></tr><tr><td>33</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></td></tr><tr><td>34</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">return</span> <span class="z-variable z-other z-go">types</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Transactions</span><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span><span class="z-variable z-other z-go">deposit</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-separator z-go">,</span> <span class="z-constant z-language z-go">nil</span>
</span></span></span></td></tr><tr><td>35</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-variable z-other z-go">arbostypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L1MessageType_SubmitRetryable</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span></td></tr><tr><td>36</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-declaration z-go">tx</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-declaration z-go">err</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-function z-go">parseSubmitRetryableMessage</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">bytes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">NewReader</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L2msg</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Header</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">chainId</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></td></tr><tr><td>37</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">if</span> <span class="z-variable z-other z-go">err</span> <span class="z-keyword z-operator z-go">!=</span> <span class="z-constant z-language z-go">nil</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span></span></td></tr><tr><td>38</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-keyword z-control z-go">return</span> <span class="z-constant z-language z-go">nil</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">err</span>
</span></span></span></span></td></tr><tr><td>39</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span></span></td></tr><tr><td>40</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">return</span> <span class="z-variable z-other z-go">types</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Transactions</span><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span><span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-separator z-go">,</span> <span class="z-constant z-language z-go">nil</span>
</span></span></span></td></tr><tr><td>41</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-variable z-other z-go">arbostypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L1MessageType_BatchForGasEstimation</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span></td></tr><tr><td>42</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">return</span> <span class="z-constant z-language z-go">nil</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">errors</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">New</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>L1 message type BatchForGasEstimation is unimplemented<span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></td></tr><tr><td>43</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-variable z-other z-go">arbostypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L1MessageType_EthDeposit</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span></td></tr><tr><td>44</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-declaration z-go">tx</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-declaration z-go">err</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-function z-go">parseEthDepositMessage</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">bytes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">NewReader</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L2msg</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Header</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">chainId</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></td></tr><tr><td>45</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">if</span> <span class="z-variable z-other z-go">err</span> <span class="z-keyword z-operator z-go">!=</span> <span class="z-constant z-language z-go">nil</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span></span></td></tr><tr><td>46</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-keyword z-control z-go">return</span> <span class="z-constant z-language z-go">nil</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">err</span>
</span></span></span></span></td></tr><tr><td>47</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span></span></td></tr><tr><td>48</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">return</span> <span class="z-variable z-other z-go">types</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Transactions</span><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span><span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-separator z-go">,</span> <span class="z-constant z-language z-go">nil</span>
</span></span></span></td></tr><tr><td>49</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-variable z-other z-go">arbostypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L1MessageType_RollupEvent</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span></td></tr><tr><td>50</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">log</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Debug</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>ignoring rollup event message<span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></td></tr><tr><td>51</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">return</span> <span class="z-variable z-other z-go">types</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Transactions</span><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span><span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-separator z-go">,</span> <span class="z-constant z-language z-go">nil</span>
</span></span></span></td></tr><tr><td>52</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-variable z-other z-go">arbostypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L1MessageType_BatchPostingReport</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span></td></tr><tr><td>53</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-declaration z-go">tx</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-declaration z-go">err</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-function z-go">parseBatchPostingReportMessage</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">bytes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">NewReader</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L2msg</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">chainId</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">BatchGasCost</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></td></tr><tr><td>54</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">if</span> <span class="z-variable z-other z-go">err</span> <span class="z-keyword z-operator z-go">!=</span> <span class="z-constant z-language z-go">nil</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span></span></td></tr><tr><td>55</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-keyword z-control z-go">return</span> <span class="z-constant z-language z-go">nil</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">err</span>
</span></span></span></span></td></tr><tr><td>56</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span></span></td></tr><tr><td>57</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">return</span> <span class="z-variable z-other z-go">types</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Transactions</span><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span><span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-separator z-go">,</span> <span class="z-constant z-language z-go">nil</span>
</span></span></span></td></tr><tr><td>58</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-variable z-other z-go">arbostypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L1MessageType_Invalid</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span></td></tr><tr><td>59</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> intentionally invalid message
</span></span></span></span></td></tr><tr><td>60</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">return</span> <span class="z-constant z-language z-go">nil</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">errors</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">New</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>invalid message<span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></td></tr><tr><td>61</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">default</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span></td></tr><tr><td>62</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> invalid message, just ignore it
</span></span></span></span></td></tr><tr><td>63</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">return</span> <span class="z-constant z-language z-go">nil</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">fmt</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Errorf</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>invalid message type <span class="z-constant z-other z-placeholder z-go">%v</span><span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Kind</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></td></tr><tr><td>64</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span></td></tr><tr><td>65</td><td><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></td></tr></tbody></table></code></pre>
<p>Arbitrum의 Transaction Type은 아래와 같이 기존 Geth에서 정의된 것들에 더해, Arbitrum Nitro에서 특별히 정의한 유형이 더 추가되었다. 당연한 얘기지만 각각의 Transaction Type마다 역할과 의미가 다르다. 그에 따라, 트랜잭션의 유형마다 <code>switch-case</code> 문을 통해 분기되어 적절한 과정을 거쳐 Transaction 파싱이 이루어져 반환된다. 특히, 우리가 다루는 L2 메세지의 파싱은 <code>ParseL2Transactions()</code> 함수의 8번째 줄 <code>parseL2Message()</code> 함수를 거친다.</p>
<pre data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><span class="z-source z-go"><span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> Transaction types.
</span></span><span class="z-source z-go"><span class="z-storage z-type z-keyword z-const z-go">const</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span>
</span><span class="z-source z-go">	<span class="z-variable z-other z-constant z-declaration z-go">ArbitrumDepositTxType</span>         <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-constant z-numeric z-integer z-hexadecimal z-go"><span class="z-punctuation z-definition z-numeric z-base z-go">0x</span>64</span>
</span><span class="z-source z-go">	<span class="z-variable z-other z-constant z-declaration z-go">ArbitrumUnsignedTxType</span>        <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-constant z-numeric z-integer z-hexadecimal z-go"><span class="z-punctuation z-definition z-numeric z-base z-go">0x</span>65</span>
</span><span class="z-source z-go">	<span class="z-variable z-other z-constant z-declaration z-go">ArbitrumContractTxType</span>        <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-constant z-numeric z-integer z-hexadecimal z-go"><span class="z-punctuation z-definition z-numeric z-base z-go">0x</span>66</span>
</span><span class="z-source z-go">	<span class="z-variable z-other z-constant z-declaration z-go">ArbitrumRetryTxType</span>           <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-constant z-numeric z-integer z-hexadecimal z-go"><span class="z-punctuation z-definition z-numeric z-base z-go">0x</span>68</span>
</span><span class="z-source z-go">	<span class="z-variable z-other z-constant z-declaration z-go">ArbitrumSubmitRetryableTxType</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-constant z-numeric z-integer z-hexadecimal z-go"><span class="z-punctuation z-definition z-numeric z-base z-go">0x</span>69</span>
</span><span class="z-source z-go">	<span class="z-variable z-other z-constant z-declaration z-go">ArbitrumInternalTxType</span>        <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-constant z-numeric z-integer z-hexadecimal z-go"><span class="z-punctuation z-definition z-numeric z-base z-go">0x</span>6A</span>
</span><span class="z-source z-go">	<span class="z-variable z-other z-constant z-declaration z-go">ArbitrumLegacyTxType</span>          <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-constant z-numeric z-integer z-hexadecimal z-go"><span class="z-punctuation z-definition z-numeric z-base z-go">0x</span>78</span>
</span><span class="z-source z-go">
</span><span class="z-source z-go">	<span class="z-variable z-other z-constant z-declaration z-go">LegacyTxType</span>     <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-constant z-numeric z-integer z-hexadecimal z-go"><span class="z-punctuation z-definition z-numeric z-base z-go">0x</span>00</span>
</span><span class="z-source z-go">	<span class="z-variable z-other z-constant z-declaration z-go">AccessListTxType</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-constant z-numeric z-integer z-hexadecimal z-go"><span class="z-punctuation z-definition z-numeric z-base z-go">0x</span>01</span>
</span><span class="z-source z-go">	<span class="z-variable z-other z-constant z-declaration z-go">DynamicFeeTxType</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-constant z-numeric z-integer z-hexadecimal z-go"><span class="z-punctuation z-definition z-numeric z-base z-go">0x</span>02</span>
</span><span class="z-source z-go">	<span class="z-variable z-other z-constant z-declaration z-go">BlobTxType</span>       <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-constant z-numeric z-integer z-hexadecimal z-go"><span class="z-punctuation z-definition z-numeric z-base z-go">0x</span>03</span>
</span><span class="z-source z-go"><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></code></pre>
<p><code>ParseL2Transactions()</code> 함수를 더 자세히 살펴보면, 첫 번째 인자로 Arbitrum Sequencer Feed로 부터 수신한 메시지의 내부의 타입인 <code>*arbostypes.L1IncomingMessage</code> 자료형의 <code>msg</code> 변수와 Arbitrum의 chainId 인 <code>42161</code> 값을 전달하게 되면, 파싱 과정에 오류가 없는 경우 파싱된 트랜잭션을 Geth에서 정의된 타입인 <code>Transcations</code> 타입으로 정상적으로 변환 받을 수 있다.</p>
<pre data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><span class="z-source z-go"><span class="z-storage z-type z-keyword z-function z-go">func</span> <span class="z-entity z-name z-function z-go">ParseL2Transactions</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-parameter z-go">msg</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">arbostypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">L1IncomingMessage</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-parameter z-go">chainId</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">big</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Int</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">types</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Transactions</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">error</span></span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></code></pre>
<p>참고로, 변환된 <code>Transactions</code> 타입의 값 내부에 존재하는 각각의 <code>Transaction</code> 타입 트랜잭션들은 Geth에서 구현된 <code>MarshalJSON()</code> 메소드를 통해 Human Readable한 형태로 트랜잭션의 각 필드들을 확인 할 수 있다. 해당 <a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/OffchainLabs/go-ethereum/blob/8e3ba695c6b07592383528855652db25f93865c2/core/types/transaction_marshalling.go#L99">코드</a>는 아래와 같고, Nitro에서는 Geth의 기존 Transaction Type에서 Arbitrum 에서 별도 정의한 Transaction Type까지 Marshalling이 되도록 잘 정의되었다.</p>
<pre data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><span class="z-source z-go"><span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> MarshalJSON marshals as JSON with a hash.
</span></span><span class="z-source z-go"><span class="z-storage z-type z-keyword z-function z-go">func</span> <span class="z-meta z-function z-declaration z-go"><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-parameter z-go">tx</span> <span class="z-keyword z-operator z-go">*</span><span class="z-storage z-type z-go">Transaction</span><span class="z-punctuation z-section z-parens z-end z-go">)</span></span><span class="z-meta z-function z-declaration z-go"> <span class="z-entity z-name z-function z-go">MarshalJSON</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">byte</span></span><span class="z-punctuation z-separator z-go">,</span> <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">error</span></span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-storage z-type z-keyword z-var z-go">var</span> <span class="z-variable z-declaration z-go">enc</span> <span class="z-storage z-type z-go">txJSON</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> These are set for all tx types.
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Hash</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Hash</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Type</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Type</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> Arbitrum: set to 0 for compatibility
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-storage z-type z-keyword z-var z-go">var</span> <span class="z-variable z-declaration z-go">zero</span> <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">uint64</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Nonce</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">zero</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">zero</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">GasPrice</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Big0</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Big0</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Input</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Bytes</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">byte</span></span><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span><span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">V</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Big0</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">R</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Big0</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">S</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Big0</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> Other fields are set conditionally depending on tx type.
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">switch</span> <span class="z-variable z-declaration z-go">itx</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">inner</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-storage z-type z-keyword z-type z-go">type</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">LegacyTx</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Nonce</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Nonce</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">To</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">To</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">GasPrice</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">GasPrice</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Input</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Bytes</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Data</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">V</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">V</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">R</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">R</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">S</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">S</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">if</span> <span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Protected</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainID</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">ChainId</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">AccessListTx</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainID</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainID</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Nonce</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Nonce</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">To</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">To</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">GasPrice</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">GasPrice</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Input</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Bytes</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Data</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">AccessList</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">AccessList</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">V</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">V</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">R</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">R</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">S</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">S</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-declaration z-go">yparity</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">V</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">YParity</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">yparity</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">DynamicFeeTx</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainID</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainID</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Nonce</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Nonce</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">To</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">To</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">MaxFeePerGas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">GasFeeCap</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">MaxPriorityFeePerGas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">GasTipCap</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Input</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Bytes</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Data</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">AccessList</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">AccessList</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">V</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">V</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">R</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">R</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">S</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">S</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-declaration z-go">yparity</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">V</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">YParity</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">yparity</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">ArbitrumLegacyTxData</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Nonce</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Nonce</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">GasPrice</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">GasPrice</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Input</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Bytes</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Data</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">To</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">To</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">V</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">V</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">R</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">R</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">S</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">S</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">EffectiveGasPrice</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">EffectiveGasPrice</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L1BlockNumber</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L1BlockNumber</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">From</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Sender</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">ArbitrumInternalTx</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainID</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainId</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Input</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Bytes</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Data</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">ArbitrumDepositTx</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RequestId</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L1RequestId</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">From</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">From</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainID</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainId</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">To</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">To</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">ArbitrumUnsignedTx</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">From</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">From</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainID</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainId</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Nonce</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Nonce</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">MaxFeePerGas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">GasFeeCap</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Input</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Bytes</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Data</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">To</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">To</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">ArbitrumContractTx</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RequestId</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RequestId</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">From</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">From</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainID</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainId</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">MaxFeePerGas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">GasFeeCap</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Input</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Bytes</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Data</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">To</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">To</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">ArbitrumRetryTx</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">From</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">From</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">TicketId</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">TicketId</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RefundTo</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RefundTo</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainID</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainId</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Nonce</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Nonce</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">MaxFeePerGas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">GasFeeCap</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Input</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Bytes</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Data</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">MaxRefund</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">MaxRefund</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">SubmissionFeeRefund</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">SubmissionFeeRefund</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">To</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">To</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">ArbitrumSubmitRetryableTx</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RequestId</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RequestId</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">From</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">From</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L1BaseFee</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L1BaseFee</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">DepositValue</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">DepositValue</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Beneficiary</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Beneficiary</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RefundTo</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">FeeRefundAddr</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">MaxSubmissionFee</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">MaxSubmissionFee</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainID</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainId</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">MaxFeePerGas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">GasFeeCap</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RetryTo</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RetryTo</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RetryValue</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RetryValue</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RetryData</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Bytes</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">RetryData</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-declaration z-go">data</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">data</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Input</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Bytes</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">data</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">To</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">To</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">case</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">BlobTx</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainID</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainID</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">ToBig</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Nonce</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Nonce</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Gas</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">MaxFeePerGas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">GasFeeCap</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">ToBig</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">MaxPriorityFeePerGas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">GasTipCap</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">ToBig</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">MaxFeePerBlobGas</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">BlobFeeCap</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">ToBig</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Value</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">ToBig</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Input</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Bytes</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Data</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">AccessList</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">AccessList</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">BlobVersionedHashes</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">BlobHashes</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">To</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">tx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">To</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">V</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">V</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">ToBig</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">R</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">R</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">ToBig</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">S</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Big</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">S</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">ToBig</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-declaration z-go">yparity</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">V</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">YParity</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">hexutil</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">yparity</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">if</span> <span class="z-variable z-declaration z-go">sidecar</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Sidecar</span><span class="z-punctuation z-terminator z-go">;</span> <span class="z-variable z-other z-go">sidecar</span> <span class="z-keyword z-operator z-go">!=</span> <span class="z-constant z-language z-go">nil</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Blobs</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Sidecar</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Blobs</span>
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Commitments</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Sidecar</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Commitments</span>
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Proofs</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">itx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Sidecar</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Proofs</span>
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">return</span> <span class="z-variable z-other z-go">json</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Marshal</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">enc</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></code></pre>
<p>이렇게 Arbitrum Sequencer Feed 메시지로부터 파싱된 트랜잭션들이, 실제로 Arbitrum One Network에 같은 순서로 조작없이 그대로 반영되었는지 각각의 트랜잭션의 Hash 값으로도 확인할 수 있다.</p>
<p>한 단위의 트랜잭션에 대해 Transaction Hash값을 통해 일일히 검증할 수도 있지만, 노드에 너무 빈번한(redundant) 요청을 발생시킬 수 있으므로, 단일 트랜잭션 단위로 검증하기보다 블록 단위의 검증을 하는 것이 더 효율적인 방법일 수 있다.</p>
<p>블록 단위의 메시지 검증을 위해서, EVM에서는 각각의 블록이 <code>Transactions Root</code> 라는 정보를 가지고 있는데, 이는 블록 내부의 트랜잭션들의 Merkle Trie 연산을 통해 도출된 Root Hash 값이다. 이 값을 통해, 우리가 수신한 메시지의 <code>Transactions Root</code> 값과 실제로 Arbitrum One Network에서 처리된 <code>Transactions Root</code> 값을 비교함으로써 검증할 수 있다.</p>
<p><code>Transaction Root</code>를 계산하는 Geth의 로직은 다음과 같다. 먼저, Geth에서 정의한 Block의 Header 구조체의 정의에서, 아래와 같은 <a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/OffchainLabs/go-ethereum/blob/8e3ba695c6b07592383528855652db25f93865c2/core/types/block.go#L80">코드</a>로 JSON Marshalling이 되었을 때의 <code>transactionsRoot</code> 필드 값을 Geth 내부적으로는 <code>TxHash</code> 라는 필드로 처리하고 있다.</p>
<pre data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><span class="z-source z-go"><span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> Header represents a block header in the Ethereum blockchain.
</span></span><span class="z-source z-go"><span class="z-storage z-type z-keyword z-type z-go">type</span> <span class="z-entity z-name z-type z-go">Header</span> <span class="z-storage z-type z-keyword z-struct z-go">struct</span> <span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">ParentHash</span>  <span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Hash</span>    <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;parentHash&quot;       gencodec:&quot;required&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">UncleHash</span>   <span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Hash</span>    <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;sha3Uncles&quot;       gencodec:&quot;required&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">Coinbase</span>    <span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Address</span> <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;miner&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">Root</span>        <span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Hash</span>    <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;stateRoot&quot;        gencodec:&quot;required&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><mark><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">TxHash</span>      <span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Hash</span>    <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;transactionsRoot&quot; gencodec:&quot;required&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span></mark><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">ReceiptHash</span> <span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Hash</span>    <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;receiptsRoot&quot;     gencodec:&quot;required&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">Bloom</span>       <span class="z-storage z-type z-go">Bloom</span>          <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;logsBloom&quot;        gencodec:&quot;required&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">Difficulty</span>  <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">big</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Int</span>       <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;difficulty&quot;       gencodec:&quot;required&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">Number</span>      <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">big</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Int</span>       <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;number&quot;           gencodec:&quot;required&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">GasLimit</span>    <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">uint64</span></span>         <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;gasLimit&quot;         gencodec:&quot;required&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">GasUsed</span>     <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">uint64</span></span>         <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;gasUsed&quot;          gencodec:&quot;required&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">Time</span>        <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">uint64</span></span>         <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;timestamp&quot;        gencodec:&quot;required&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">Extra</span>       <span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">byte</span></span>         <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;extraData&quot;        gencodec:&quot;required&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">MixDigest</span>   <span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Hash</span>    <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;mixHash&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">Nonce</span>       <span class="z-storage z-type z-go">BlockNonce</span>     <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;nonce&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> BaseFee was added by EIP-1559 and is ignored in legacy headers.
</span></span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">BaseFee</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">big</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Int</span> <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;baseFeePerGas&quot; rlp:&quot;optional&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> WithdrawalsHash was added by EIP-4895 and is ignored in legacy headers.
</span></span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">WithdrawalsHash</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Hash</span> <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;withdrawalsRoot&quot; rlp:&quot;optional&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> BlobGasUsed was added by EIP-4844 and is ignored in legacy headers.
</span></span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">BlobGasUsed</span> <span class="z-keyword z-operator z-go">*</span><span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">uint64</span></span> <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;blobGasUsed&quot; rlp:&quot;optional&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> ExcessBlobGas was added by EIP-4844 and is ignored in legacy headers.
</span></span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">ExcessBlobGas</span> <span class="z-keyword z-operator z-go">*</span><span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">uint64</span></span> <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;excessBlobGas&quot; rlp:&quot;optional&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> ParentBeaconRoot was added by EIP-4788 and is ignored in legacy headers.
</span></span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">ParentBeaconRoot</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Hash</span> <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;parentBeaconBlockRoot&quot; rlp:&quot;optional&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> RequestsHash was added by EIP-7685 and is ignored in legacy headers.
</span></span></span><span class="z-source z-go"><span class="z-meta z-type z-go">	<span class="z-variable z-other z-member z-declaration z-go">RequestsHash</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Hash</span> <span class="z-string z-quoted z-other z-go"><span class="z-punctuation z-definition z-string z-begin z-go">`</span>json:&quot;requestsHash&quot; rlp:&quot;optional&quot;<span class="z-punctuation z-definition z-string z-end z-go">`</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></code></pre>
<p>그리고, Geth 에서는 각각의 Block이 생성될 때 <code>NewBlock()</code> 이라는 함수가 실행되는데, <a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/OffchainLabs/go-ethereum/blob/8e3ba695c6b07592383528855652db25f93865c2/core/types/block.go#L257">코드</a>는 아래와 같다. 특히, <code>b.header.TxHash = DeriveSha(Transactions(txs), hasher)</code> 와 같이, <code>TransactionsRoot</code> 가 <code>DeriveSha()</code> 함수를 통해 블록에 담길 트랜잭션의 정보와, <code>TrieHasher</code> 라는 타입의 <code>hasher</code> 변수를 통해 이루어지는 것을 알 수 있다.</p>
<pre data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><span class="z-source z-go"><span class="z-storage z-type z-keyword z-function z-go">func</span> <span class="z-entity z-name z-function z-go">NewBlock</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-parameter z-go">header</span> <span class="z-keyword z-operator z-go">*</span><span class="z-storage z-type z-go">Header</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-parameter z-go">body</span> <span class="z-keyword z-operator z-go">*</span><span class="z-storage z-type z-go">Body</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-parameter z-go">receipts</span> <span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-keyword z-operator z-go">*</span><span class="z-storage z-type z-go">Receipt</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-parameter z-go">hasher</span> <span class="z-storage z-type z-go">TrieHasher</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-keyword z-operator z-go">*</span><span class="z-storage z-type z-go">Block</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">if</span> <span class="z-variable z-other z-go">body</span> <span class="z-keyword z-operator z-go">==</span> <span class="z-constant z-language z-go">nil</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">body</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">Body</span><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-storage z-type z-keyword z-var z-go">var</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-declaration z-go">b</span>           <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-function z-go">NewBlockWithHeader</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">header</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-declaration z-go">txs</span>         <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">body</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Transactions</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-declaration z-go">uncles</span>      <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">body</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Uncles</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-declaration z-go">withdrawals</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">body</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Withdrawals</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">if</span> <span class="z-variable z-function z-go"><span class="z-support z-function z-builtin z-go">len</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">txs</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-keyword z-operator z-go">==</span> <span class="z-constant z-numeric z-integer z-decimal z-go">0</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">b</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">TxHash</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">EmptyTxsHash</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span> <span class="z-keyword z-control z-go">else</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><mark><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">b</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">TxHash</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-function z-go">DeriveSha</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-function z-go">Transactions</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">txs</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">hasher</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></mark><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">b</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">transactions</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-function z-go"><span class="z-support z-function z-builtin z-go">make</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-storage z-type z-go">Transactions</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-function z-go"><span class="z-support z-function z-builtin z-go">len</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">txs</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-function z-go"><span class="z-support z-function z-builtin z-go">copy</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">b</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">transactions</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">txs</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">if</span> <span class="z-variable z-function z-go"><span class="z-support z-function z-builtin z-go">len</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">receipts</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-keyword z-operator z-go">==</span> <span class="z-constant z-numeric z-integer z-decimal z-go">0</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">b</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ReceiptHash</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">EmptyReceiptsHash</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span> <span class="z-keyword z-control z-go">else</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">b</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ReceiptHash</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-function z-go">DeriveSha</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-function z-go">Receipts</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">receipts</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">hasher</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> Receipts must go through MakeReceipt to calculate the receipt&#39;s bloom
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> already. Merge the receipt&#39;s bloom together instead of recalculating
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> everything.
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">b</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Bloom</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-function z-go">MergeBloom</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">receipts</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">if</span> <span class="z-variable z-function z-go"><span class="z-support z-function z-builtin z-go">len</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">uncles</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-keyword z-operator z-go">==</span> <span class="z-constant z-numeric z-integer z-decimal z-go">0</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">b</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">UncleHash</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">EmptyUncleHash</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span> <span class="z-keyword z-control z-go">else</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">b</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">UncleHash</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-function z-go">CalcUncleHash</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">uncles</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">b</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">uncles</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-function z-go"><span class="z-support z-function z-builtin z-go">make</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-keyword z-operator z-go">*</span><span class="z-storage z-type z-go">Header</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-function z-go"><span class="z-support z-function z-builtin z-go">len</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">uncles</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">for</span> <span class="z-variable z-declaration z-go">i</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-keyword z-other z-go">range</span> <span class="z-variable z-other z-go">uncles</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-variable z-other z-go">b</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">uncles</span><span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-variable z-other z-go">i</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-function z-go">CopyHeader</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">uncles</span><span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-variable z-other z-go">i</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">if</span> <span class="z-variable z-other z-go">withdrawals</span> <span class="z-keyword z-operator z-go">==</span> <span class="z-constant z-language z-go">nil</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">b</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">WithdrawalsHash</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-constant z-language z-go">nil</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span> <span class="z-keyword z-control z-go">else</span> <span class="z-keyword z-control z-go">if</span> <span class="z-variable z-function z-go"><span class="z-support z-function z-builtin z-go">len</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">withdrawals</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-keyword z-operator z-go">==</span> <span class="z-constant z-numeric z-integer z-decimal z-go">0</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">b</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">WithdrawalsHash</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">EmptyWithdrawalsHash</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">b</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">withdrawals</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">Withdrawals</span><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span> <span class="z-keyword z-control z-go">else</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-declaration z-go">hash</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-function z-go">DeriveSha</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-function z-go">Withdrawals</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">withdrawals</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">hasher</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">b</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">WithdrawalsHash</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">hash</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">b</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">withdrawals</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">slices</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Clone</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">withdrawals</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">return</span> <span class="z-variable z-other z-go">b</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></code></pre>
<p>더 깊이 나아가서 <code>DeriveSha()</code> 함수의 정의를 살펴볼 수도 있겠지만, 해당 아티클에서는 Arbitrum Sequencer Feed를 통한 검증을 다루고자 하므로 세부 로직은 생략한다. <code>DeriveSha()</code> 함수의 첫 번째 인자로는 트랜잭션들이 전달되고, 두 번째 인자로는 <code>trie.NewStackTrie(nil)</code> 가 전달되어야 트랜잭션의 Merkle Trie Root인,<code>Transactions Root</code>가 계산된다는 것만 알아두자.</p>
<p>그런데, 실제 Arbitrum의 Block의 생성이 될 때에는, 아래와 같은 <a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/OffchainLabs/nitro/blob/master/arbos/block_processor.go#L200">코드</a>로, 기존 처리될 트랜잭션들의 가장 맨 앞에 <code>Start Block</code> 이라는 트랜잭션이 삽입되게 된다.</p>
<pre data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><span class="z-source z-go"><span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> Prepend a tx before all others to touch up the state (update the L1 block num, pricing pools, etc)
</span></span><span class="z-source z-go"><span class="z-variable z-declaration z-go">startTx</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-function z-go">InternalTxStartBlock</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">chainConfig</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ChainID</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">l1Header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">L1BaseFee</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">l1BlockNum</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">header</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">lastBlockHeader</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span><span class="z-source z-go"><span class="z-variable z-other z-go">txes</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-function z-go"><span class="z-support z-function z-builtin z-go">append</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">types</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Transactions</span><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span><span class="z-variable z-other z-go">types</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">NewTx</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">startTx</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">txes</span><span class="z-keyword z-operator z-variadic z-go">...</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></code></pre>
<p>이는 Arbiscan의 각각의 블록에 포함된 트랜잭션들을 보면 바로 알 수 있는데, 매 블록마다 가장 앞 트랜잭션은 <code>Start Block</code>이라는 트랜잭션이 끼어있게 된다. 임의로 아무 블록 높이 값을 지정해서 확인해봐도 첫 번째로 포함된 트랜잭션은 항상 <code>Start Block</code> 트랜잭션이다.</p>
<figure>
    <img
        src=".&#x2F;img&#x2F;arbitrumSeqFeed.png"
         alt="arbitrumSeqFeed"
        
        
    >
    
    <figcaption><p>블록 높이 268544083의 첫 번째 트랜잭션도 'Start Block'</p>
</figcaption>
    
</figure>
<p><code>Start Block</code> 트랜잭션은, <code>Transactions Root</code> 를 계산하는 데에 있어서 당연히 필요한 트랜잭션이지만, Arbitrum Sequencer Feed 에서는 <code>Start Block</code> 트랜잭션이 포함되지 않은 상태로 송신되고 있다. 이에, <code>Start Block</code> 트랜잭션은 Sequencer Feed 발행 후에 이루어지는 블록 생성 바로 직전에 삽입되는 것이므로, 우리도 마찬가지로 내부적으로 <code>Start Block</code>을 삽입해야 한다.</p>
<p><code>Start Block</code> 트랜잭션이 생성되는 Nitro의 구현은 <code>InternalTxStartBlock()</code> 함수 등으로 이루어져 있고, <a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/OffchainLabs/nitro/blob/4941f52a1eab6002feff07146f0937dfd4ce53d6/arbos/internal_tx.go#L24">코드</a>는 아래 같다.</p>
<pre data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><span class="z-source z-go"><span class="z-storage z-type z-keyword z-function z-go">func</span> <span class="z-entity z-name z-function z-go">InternalTxStartBlock</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span>
</span><span class="z-source z-go">	<span class="z-storage z-type z-go">chainId</span><span class="z-punctuation z-separator z-go">,</span>
</span><span class="z-source z-go">	<span class="z-storage z-type z-go">l1BaseFee</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">big</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Int</span><span class="z-punctuation z-separator z-go">,</span>
</span><span class="z-source z-go">	<span class="z-storage z-type z-go">l1BlockNum</span> <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">uint64</span></span><span class="z-punctuation z-separator z-go">,</span>
</span><span class="z-source z-go">	<span class="z-storage z-type z-go">header</span><span class="z-punctuation z-separator z-go">,</span>
</span><span class="z-source z-go">	<span class="z-storage z-type z-go">lastHeader</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">types</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Header</span><span class="z-punctuation z-separator z-go">,</span>
</span><span class="z-source z-go"><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">types</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">ArbitrumInternalTx</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-variable z-declaration z-go">l2BlockNum</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Number</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Uint64</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-variable z-declaration z-go">timePassed</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">header</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Time</span> <span class="z-keyword z-operator z-go">-</span> <span class="z-variable z-other z-go">lastHeader</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Time</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">if</span> <span class="z-variable z-other z-go">l1BaseFee</span> <span class="z-keyword z-operator z-go">==</span> <span class="z-constant z-language z-go">nil</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">l1BaseFee</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">big</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">NewInt</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-constant z-numeric z-integer z-decimal z-go">0</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span><mark><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-variable z-declaration z-go">data</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-declaration z-go">err</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">util</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">PackInternalTxDataStartBlock</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">l1BaseFee</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">l1BlockNum</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">l2BlockNum</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">timePassed</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></mark><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">if</span> <span class="z-variable z-other z-go">err</span> <span class="z-keyword z-operator z-go">!=</span> <span class="z-constant z-language z-go">nil</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-function z-go"><span class="z-support z-function z-builtin z-go">panic</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">fmt</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Sprintf</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>Failed to pack internal tx <span class="z-constant z-other z-placeholder z-go">%v</span><span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">err</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">return</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">types</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ArbitrumInternalTx</span><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">ChainId</span><span class="z-punctuation z-separator z-go">:</span> <span class="z-variable z-other z-go">chainId</span><span class="z-punctuation z-separator z-go">,</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">Data</span><span class="z-punctuation z-separator z-go">:</span>    <span class="z-variable z-other z-go">data</span><span class="z-punctuation z-separator z-go">,</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></code></pre>
<p>코드 중 특히, <code>util.PackInternalTxDataStartBlock(l1BaseFee, l1BlockNum, l2BlockNum, timePassed)</code> 와 같은 방법으로 <code>Start Block</code> 트랜잭션의 <code>Data</code> 필드를 연산하고 있는데, <code>l1BaseFee</code> 및 <code>l1BlockNum</code>, <code>l2BlockNum</code>, <code>timePassed</code>와 같은 인자들을 받고 있다. 아래는 해당 인자들의 계산 방법이다. (앞선 Sequencer Feed Message의 예제로 보여준 단위 Response를 아래에서 그대로 다시 작성하였다)</p>
<ul>
<li><code>l1BaseFee</code> : Sequencer Feed 에서 <code>baseFeeL1</code> 필드의 값으로 얻을 수 있음</li>
<li><code>l1BlockNum</code> : Sequencer Feed 에서 <code>blockNumber</code> 필드의 값으로 얻을 수 있음</li>
<li><code>l2BlockNum</code> : Sequencer Feed 에서 <code>sequenceNumber</code> 필드의 값에 <code>22207817</code> (Arbitrum One Genesis Block Number) 를 더한 값으로 얻을 수 있음 (이는 앞서 언급한 Arbitrum Official document의 <a rel="noopener nofollow noreferrer" target="_blank" href="https://docs.arbitrum.io/run-arbitrum-node/sequencer/read-sequencer-feed">How to read sequencer feed</a>에 설명되어 있다)</li>
<li><code>timePassed</code> : Sequencer Feed 에서 해당 메시지 <code>timestamp</code> 필드의 값에서 해당 메시지 바로 직전에 수신한 메시지의 <code>timestamp</code> 필드의 값을 뺀 값으로 얻을 수 있음 (즉, 메시지 검증을 위해서는 검증하고자 할 메시지의 바로 직전 메시지의 <code>timestamp</code> 값이 필요하다)</li>
</ul>
<pre data-lang="json" class="language-json z-code"><code class="language-json" data-lang="json"><span class="z-source z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-json">  </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>version<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">1</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json">  </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>messages<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">    <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>sequenceNumber<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">25757171</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>message<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">        </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>message<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>header<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">            </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>kind<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">3</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">            </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>sender<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>0xa4b000000000000000000073657175656e636572<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">            </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>blockNumber<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">16238523</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">            </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>timestamp<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">1671691403</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">            </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>requestId<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-language z-json">null</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">            </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>baseFeeL1<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-language z-json">null</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">          <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>l2Msg<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>BAL40oKksUiElQL5AISg7rsAgxb6o5SZbYNoIF2DTixsqDpD2xII9GJLG4C4ZAhh6N0AAAAAAAAAAAAAAAC7EQiq1R1VYgL3/oXgvD921hYRyAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArAAaAkebuEnSAUvrWVBGTxA7W+ZMNn5uyLlbOH7Nrs0bYOv6AOxQPqAo2UB0Z7vqlugjn+BUl0drDcWejBfDiPEC6jQA==<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">        <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">        </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>delayedMessagesRead<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">354560</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">      <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">&quot;</span>signature<span class="z-punctuation z-definition z-string z-end z-json">&quot;</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-language z-json">null</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">    <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">  <span class="z-punctuation z-section z-sequence z-end z-json">]</span></span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></code></pre>
<p>이를 통해, <code>Start Block</code> 트랜잭션을 우리가 연산 및 빌드하여, 시퀀서 메시지로부터 Decoding 및 Parsing한 Transaction의 맨 앞에 삽입하여 <code>Transactions Root</code>를 구한 후, 해당 메시지 및 직전 메시지의 <code>timestamp</code> 값으로부터 연산 된 <code>l2BlockNum</code> 을 <code>viem</code> 등의 라이브러리를 이용한 RPC 호출 등을 통해 실제 Arbitrum One에서 처리된 Block의 <code>Transactions Root</code> 값과 같은지 비교하여, Arbitrum Sequencer가 정상적으로 동작하고 있는지 Validation 할 수 있다.</p>
<h2 id="wasm-compile">WASM Compile<a class="zola-anchor" href="#wasm-compile" aria-label="Anchor link for: wasm-compile" style="visibility: hidden;"></a>
</h2>
<p>이렇게 Go 언어로 작성된 트랜잭션 파싱 과정을 웹 어셈블리 언어로 컴파일하면 웹에서도 사용할 수 있다. 내가 직접 작성한 <a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/gloomydumber/arbfeedtowasm">arbfeedtowasm</a> 이라는 레포지토리에서 작성한 아래와 같은 Go 언어 코드를 컴파일하면 Arbitrum Sequencer Feed 메시지를 파싱하는 <code>.wasm</code> 파일을 생성할 수 있다. 파싱에 사용된 함수는 모두 Nitro를 git submodule로 설정하고 임포트하여 과정을 진행하였다.</p>
<pre data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><span class="z-source z-go"><span class="z-keyword z-other z-package z-go">package</span> <span class="z-variable z-other z-go">jsutil</span>
</span><span class="z-source z-go">
</span><span class="z-source z-go"><span class="z-keyword z-other z-import z-go">import</span> <span class="z-punctuation z-section z-parens z-begin z-go">(</span>
</span><span class="z-source z-go">	<span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>encoding/json<span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span>
</span><span class="z-source z-go">	<span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>syscall/js<span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span>
</span><span class="z-source z-go">
</span><span class="z-source z-go">	<span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>arbfeedtowasm/feedtypes<span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span>
</span><span class="z-source z-go">	<span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>arbfeedtowasm/operation<span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span>
</span><span class="z-source z-go">	<span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>arbfeedtowasm/utils<span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span>
</span><span class="z-source z-go">
</span><span class="z-source z-go">	<span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>github.com/ethereum/go-ethereum/common<span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span>
</span><span class="z-source z-go">	<span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>github.com/ethereum/go-ethereum/core/types<span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span>
</span><span class="z-source z-go"><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span><span class="z-source z-go">
</span><span class="z-source z-go"><span class="z-storage z-type z-keyword z-function z-go">func</span> <span class="z-entity z-name z-function z-go">CalculateTransactionsRootWithStartTx</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-parameter z-go">this</span> <span class="z-variable z-other z-go">js</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Value</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-parameter z-go">p</span> <span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-variable z-other z-go">js</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Value</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-storage z-type z-keyword z-interface z-go">interface</span><span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span><span class="z-punctuation z-section z-braces z-end z-go">}</span></span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-storage z-type z-keyword z-var z-go">var</span> <span class="z-variable z-declaration z-go">sequencerMessage</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">p</span><span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-constant z-numeric z-integer z-decimal z-go">0</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">String</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-storage z-type z-keyword z-var z-go">var</span> <span class="z-variable z-declaration z-go">lastTimestamp</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-function z-go"><span class="z-support z-type z-builtin z-go">uint64</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">p</span><span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-constant z-numeric z-integer z-decimal z-go">1</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Int</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-storage z-type z-keyword z-var z-go">var</span> <span class="z-variable z-declaration z-go">msg</span> <span class="z-variable z-other z-go">feedtypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">IncomingMessage</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">utils</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">ParseIncomingMessage</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">sequencerMessage</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-storage z-type z-keyword z-var z-go">var</span> <span class="z-variable z-declaration z-go">txns</span> <span class="z-variable z-other z-go">types</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Transactions</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">operation</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">ParseL2TransactionsWithStartTx</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">lastTimestamp</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-storage z-type z-keyword z-var z-go">var</span> <span class="z-variable z-declaration z-go">txnsRoot</span> <span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Hash</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">operation</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">CalculateTransactionsRoot</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">txns</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">return</span> <span class="z-variable z-other z-go">js</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">ValueOf</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">txnsRoot</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">String</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span><span class="z-source z-go">
</span><span class="z-source z-go"><span class="z-storage z-type z-keyword z-function z-go">func</span> <span class="z-entity z-name z-function z-go">GetTransactionDetailsWithRoot</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-parameter z-go">this</span> <span class="z-variable z-other z-go">js</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Value</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-parameter z-go">p</span> <span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-variable z-other z-go">js</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Value</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-storage z-type z-keyword z-interface z-go">interface</span><span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span><span class="z-punctuation z-section z-braces z-end z-go">}</span></span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-storage z-type z-keyword z-var z-go">var</span> <span class="z-variable z-declaration z-go">sequencerMessage</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">p</span><span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-constant z-numeric z-integer z-decimal z-go">0</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">String</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-storage z-type z-keyword z-var z-go">var</span> <span class="z-variable z-declaration z-go">lastTimestamp</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-function z-go"><span class="z-support z-type z-builtin z-go">uint64</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">p</span><span class="z-punctuation z-section z-brackets z-begin z-go">[</span><span class="z-constant z-numeric z-integer z-decimal z-go">1</span><span class="z-punctuation z-section z-brackets z-end z-go">]</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Int</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-storage z-type z-keyword z-var z-go">var</span> <span class="z-variable z-declaration z-go">msg</span> <span class="z-variable z-other z-go">feedtypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">IncomingMessage</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">utils</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">ParseIncomingMessage</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">sequencerMessage</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-storage z-type z-keyword z-var z-go">var</span> <span class="z-variable z-declaration z-go">txns</span> <span class="z-variable z-other z-go">types</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Transactions</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">operation</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">ParseL2TransactionsWithStartTx</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">lastTimestamp</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-storage z-type z-keyword z-var z-go">var</span> <span class="z-variable z-declaration z-go">txnsRoot</span> <span class="z-variable z-other z-go">common</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Hash</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">operation</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">CalculateTransactionsRoot</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">txns</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-variable z-declaration z-go">response</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">feedtypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Response</span><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">Result</span><span class="z-punctuation z-separator z-go">:</span> <span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>success<span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span><span class="z-punctuation z-separator z-go">,</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">Data</span><span class="z-punctuation z-separator z-go">:</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">feedtypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ResponseData</span><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-variable z-other z-go">Transactions</span><span class="z-punctuation z-separator z-go">:</span>     <span class="z-variable z-other z-go">txns</span><span class="z-punctuation z-separator z-go">,</span>
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-variable z-other z-go">TransactionsRoot</span><span class="z-punctuation z-separator z-go">:</span> <span class="z-variable z-other z-go">txnsRoot</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">String</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-separator z-go">,</span>
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-separator z-go">,</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-variable z-declaration z-go">jsonResult</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-declaration z-go">err</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">json</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Marshal</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">response</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">if</span> <span class="z-variable z-other z-go">err</span> <span class="z-keyword z-operator z-go">!=</span> <span class="z-constant z-language z-go">nil</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">response</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">feedtypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Response</span><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-variable z-other z-go">Result</span><span class="z-punctuation z-separator z-go">:</span> <span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>error<span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span><span class="z-punctuation z-separator z-go">,</span>
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-variable z-other z-go">Error</span><span class="z-punctuation z-separator z-go">:</span> <span class="z-keyword z-operator z-go">&amp;</span><span class="z-variable z-other z-go">feedtypes</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">ErrorResponse</span><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">				<span class="z-variable z-other z-go">Message</span><span class="z-punctuation z-separator z-go">:</span> <span class="z-string z-quoted z-double z-go"><span class="z-punctuation z-definition z-string z-begin z-go">&quot;</span>Failed to marshal response to JSON<span class="z-punctuation z-definition z-string z-end z-go">&quot;</span></span><span class="z-punctuation z-separator z-go">,</span>
</span></span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">			<span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-separator z-go">,</span>
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-variable z-other z-go">jsonResult</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-language z-blank z-go">_</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">json</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Marshal</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">response</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">		<span class="z-keyword z-control z-go">return</span> <span class="z-variable z-other z-go">js</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">ValueOf</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-function z-go"><span class="z-support z-type z-builtin z-go">string</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">jsonResult</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">	<span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">	<span class="z-keyword z-control z-go">return</span> <span class="z-variable z-other z-go">js</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">ValueOf</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-function z-go"><span class="z-support z-type z-builtin z-go">string</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">jsonResult</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></code></pre>
<p>Go 언어에서 웹 어셈블리로의 컴파일은 아래와 같은 명령어로 진행하면 된다.</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> GOJS=js GOARCH=wasm go build<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>o</span> <span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span>resultFileName<span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span>.wasm <span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span>originFileName<span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span>.go</span>
</span></code></pre>
<p>컴파일 된 <code>.wasm</code> 파일을 이용하면 웹 환경에서 WebSocket으로 Arbitrum Sequencer Feed를 수신한 결과를 파싱하고, 또 그 파싱한 결과와 Arbitrum RPC Node에 요청한 결과를 비교하여 검증할 수 있다.</p>

      </article>

      
      
      <div class="reaction right" data-endpoint="https:&#x2F;&#x2F;example.com&#x2F;api&#x2F;reaction"></div>
      

      
      
      <div class="giscus"></div>
      <script src="https://giscus.app/client.js"
        data-repo="isunjn/serene-demo-site"
        data-repo-id="R_kgDOGXmnuA"
        data-category="giscus_comment"
        data-category-id="DIC_kwDOGXmnuM4CWs0S"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="0"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="https://gloomydumber.github.io/giscus_light.css"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
      
    </div>

    


<footer>
  <div class="left">
    <div class="copyright">
      © 2025 gloomydumber
      
    </div>
  </div>

  <div class="right">
    
    
      
    
    
    <a id="rss-btn" href="https://gloomydumber.github.io/posts/feed.xml">RSS</a>
    
    

    
    
    
    <button id="theme-toggle" aria-label="theme switch">
      <span class="moon-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M10 7C10 10.866 13.134 14 17 14C18.9584 14 20.729 13.1957 21.9995 11.8995C22 11.933 22 11.9665 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C12.0335 2 12.067 2 12.1005 2.00049C10.8043 3.27098 10 5.04157 10 7ZM4 12C4 16.4183 7.58172 20 12 20C15.0583 20 17.7158 18.2839 19.062 15.7621C18.3945 15.9187 17.7035 16 17 16C12.0294 16 8 11.9706 8 7C8 6.29648 8.08133 5.60547 8.2379 4.938C5.71611 6.28423 4 8.9417 4 12Z" fill="currentColor"></path></svg>
</span>
      <span class="sun-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16ZM11 1H13V4H11V1ZM11 20H13V23H11V20ZM3.51472 4.92893L4.92893 3.51472L7.05025 5.63604L5.63604 7.05025L3.51472 4.92893ZM16.9497 18.364L18.364 16.9497L20.4853 19.0711L19.0711 20.4853L16.9497 18.364ZM19.0711 3.51472L20.4853 4.92893L18.364 7.05025L16.9497 5.63604L19.0711 3.51472ZM5.63604 16.9497L7.05025 18.364L4.92893 20.4853L3.51472 19.0711L5.63604 16.9497ZM23 11V13H20V11H23ZM4 11V13H1V11H4Z" fill="currentColor"></path></svg>
</span>
    </button>
    
  </div>
</footer>




<dialog id="rss-mask">
  <div>
    <a href="https:&#x2F;&#x2F;gloomydumber.github.io&#x2F;posts&#x2F;feed.xml">https:&#x2F;&#x2F;gloomydumber.github.io&#x2F;posts&#x2F;feed.xml</a>
    
    
    <button autofocus aria-label="copy" data-link="https:&#x2F;&#x2F;gloomydumber.github.io&#x2F;posts&#x2F;feed.xml" data-copy-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
" data-check-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
" >
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z" fill="currentColor"></path></svg>

    </button>
  </div>
</dialog>



  </main>
</div>

  
<script src="/js/lightense.min.js"></script>


  <script src="https://gloomydumber.github.io/js/main.js"></script>
</body>

</html>
